{% extends 'base.html' %}

{% block title %}Language & Region - MindBridge{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="bg-white rounded-lg shadow">
        <!-- Header -->
        <div class="px-6 py-4 border-b border-gray-200">
            <div class="flex items-center">
                <a href="/settings/" class="text-gray-500 hover:text-gray-700 mr-4">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <div>
                    <h1 class="text-2xl font-bold text-gray-900">Language & Region</h1>
                    <p class="text-gray-600">Set your language and regional preferences</p>
                </div>
            </div>
        </div>
        
        <!-- Form -->
        <div class="p-6">
            <form method="post" class="space-y-6">
                {% csrf_token %}
                
                <div class="space-y-6">
                    <div>
                        <label for="language" class="block text-sm font-medium text-gray-700 mb-2">
                            Display Language
                        </label>
                        <select id="language" name="language" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="English" {% if profile.language_preferences and 'English' in profile.language_preferences %}selected{% endif %}>English</option>
                            <option value="Spanish" {% if profile.language_preferences and 'Spanish' in profile.language_preferences %}selected{% endif %}>Español (Spanish)</option>
                            <option value="French" {% if profile.language_preferences and 'French' in profile.language_preferences %}selected{% endif %}>Français (French)</option>
                            <option value="German" {% if profile.language_preferences and 'German' in profile.language_preferences %}selected{% endif %}>Deutsch (German)</option>
                            <option value="Italian" {% if profile.language_preferences and 'Italian' in profile.language_preferences %}selected{% endif %}>Italiano (Italian)</option>
                            <option value="Portuguese" {% if profile.language_preferences and 'Portuguese' in profile.language_preferences %}selected{% endif %}>Português (Portuguese)</option>
                            <option value="Chinese" {% if profile.language_preferences and 'Chinese' in profile.language_preferences %}selected{% endif %}>中文 (Chinese)</option>
                            <option value="Japanese" {% if profile.language_preferences and 'Japanese' in profile.language_preferences %}selected{% endif %}>日本語 (Japanese)</option>
                            <option value="Korean" {% if profile.language_preferences and 'Korean' in profile.language_preferences %}selected{% endif %}>한국어 (Korean)</option>
                            <option value="Arabic" {% if profile.language_preferences and 'Arabic' in profile.language_preferences %}selected{% endif %}>العربية (Arabic)</option>
                        </select>
                        <p class="text-sm text-gray-500 mt-1">Interface language for the application</p>
                    </div>
                    
                    <div>
                        <label for="timezone" class="block text-sm font-medium text-gray-700 mb-2">
                            Time Zone
                        </label>
                        <select id="timezone" name="timezone" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <!-- US Time Zones -->
                            <optgroup label="United States">
                                <option value="America/New_York" {% if profile.timezone == 'America/New_York' %}selected{% endif %}>Eastern Time (New York)</option>
                                <option value="America/Chicago" {% if profile.timezone == 'America/Chicago' %}selected{% endif %}>Central Time (Chicago)</option>
                                <option value="America/Denver" {% if profile.timezone == 'America/Denver' %}selected{% endif %}>Mountain Time (Denver)</option>
                                <option value="America/Los_Angeles" {% if profile.timezone == 'America/Los_Angeles' %}selected{% endif %}>Pacific Time (Los Angeles)</option>
                                <option value="America/Anchorage" {% if profile.timezone == 'America/Anchorage' %}selected{% endif %}>Alaska Time (Anchorage)</option>
                                <option value="Pacific/Honolulu" {% if profile.timezone == 'Pacific/Honolulu' %}selected{% endif %}>Hawaii Time (Honolulu)</option>
                            </optgroup>
                            
                            <!-- Europe -->
                            <optgroup label="Europe">
                                <option value="Europe/London" {% if profile.timezone == 'Europe/London' %}selected{% endif %}>London (GMT)</option>
                                <option value="Europe/Paris" {% if profile.timezone == 'Europe/Paris' %}selected{% endif %}>Paris (CET)</option>
                                <option value="Europe/Berlin" {% if profile.timezone == 'Europe/Berlin' %}selected{% endif %}>Berlin (CET)</option>
                                <option value="Europe/Rome" {% if profile.timezone == 'Europe/Rome' %}selected{% endif %}>Rome (CET)</option>
                                <option value="Europe/Madrid" {% if profile.timezone == 'Europe/Madrid' %}selected{% endif %}>Madrid (CET)</option>
                                <option value="Europe/Moscow" {% if profile.timezone == 'Europe/Moscow' %}selected{% endif %}>Moscow (MSK)</option>
                            </optgroup>
                            
                            <!-- Asia -->
                            <optgroup label="Asia">
                                <option value="Asia/Tokyo" {% if profile.timezone == 'Asia/Tokyo' %}selected{% endif %}>Tokyo (JST)</option>
                                <option value="Asia/Shanghai" {% if profile.timezone == 'Asia/Shanghai' %}selected{% endif %}>Shanghai (CST)</option>
                                <option value="Asia/Seoul" {% if profile.timezone == 'Asia/Seoul' %}selected{% endif %}>Seoul (KST)</option>
                                <option value="Asia/Kolkata" {% if profile.timezone == 'Asia/Kolkata' %}selected{% endif %}>Kolkata (IST)</option>
                                <option value="Asia/Dubai" {% if profile.timezone == 'Asia/Dubai' %}selected{% endif %}>Dubai (GST)</option>
                            </optgroup>
                            
                            <!-- Australia -->
                            <optgroup label="Australia">
                                <option value="Australia/Sydney" {% if profile.timezone == 'Australia/Sydney' %}selected{% endif %}>Sydney (AEST)</option>
                                <option value="Australia/Melbourne" {% if profile.timezone == 'Australia/Melbourne' %}selected{% endif %}>Melbourne (AEST)</option>
                                <option value="Australia/Perth" {% if profile.timezone == 'Australia/Perth' %}selected{% endif %}>Perth (AWST)</option>
                            </optgroup>
                            
                            <!-- Other -->
                            <optgroup label="Other">
                                <option value="UTC" {% if profile.timezone == 'UTC' or not profile.timezone %}selected{% endif %}>UTC (Coordinated Universal Time)</option>
                            </optgroup>
                        </select>
                        <p class="text-sm text-gray-500 mt-1">Used for scheduling appointments and notifications</p>
                    </div>
                    
                    <div>
                        <h3 class="font-medium text-gray-900 mb-4">Regional Settings</h3>
                        <div class="space-y-4">
                            <div>
                                <label for="date_format" class="block text-sm font-medium text-gray-700 mb-2">
                                    Date Format
                                </label>
                                <select id="date_format" name="date_format" 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="MM/DD/YYYY">MM/DD/YYYY (US Format)</option>
                                    <option value="DD/MM/YYYY">DD/MM/YYYY (European Format)</option>
                                    <option value="YYYY-MM-DD">YYYY-MM-DD (ISO Format)</option>
                                    <option value="DD MMM YYYY">DD MMM YYYY (e.g., 15 Aug 2025)</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="time_format" class="block text-sm font-medium text-gray-700 mb-2">
                                    Time Format
                                </label>
                                <select id="time_format" name="time_format" 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="12">12-hour (2:30 PM)</option>
                                    <option value="24">24-hour (14:30)</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="first_day_of_week" class="block text-sm font-medium text-gray-700 mb-2">
                                    First Day of Week
                                </label>
                                <select id="first_day_of_week" name="first_day_of_week" 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="sunday">Sunday</option>
                                    <option value="monday">Monday</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-blue-50 border-l-4 border-blue-400 p-4">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-info-circle text-blue-400"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm text-blue-700">
                                Language and regional settings affect how dates, times, and content are displayed. 
                                Some language options may require a page refresh to take full effect.
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 pt-6 border-t">
                    <a href="/settings/" class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50">
                        Cancel
                    </a>
                    <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700">
                        Save Settings
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
// Auto-detect timezone
document.addEventListener('DOMContentLoaded', function() {
    const timezoneSelect = document.getElementById('timezone');
    const detectedTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
    
    // Try to select the detected timezone
    if (detectedTimezone && !timezoneSelect.value) {
        const option = timezoneSelect.querySelector(`option[value="${detectedTimezone}"]`);
        if (option) {
            option.selected = true;
        }
    }
});
</script>
{% endblock %}
